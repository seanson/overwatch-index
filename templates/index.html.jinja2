<html>
<head>
<title>Overwatch Coaching Index</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" />
<style type="text/css">
    body > .ui.container {
      margin-top: 20em;
    }
    body {
      background-color: #DADADA;
    }
    .main{min-height:100%;
      padding-bottom:60px;
      box-sizing:border-box;}
    .footer {
      background-color: black;
      color: rgba(255,255,255,.9);
      position: absolute;
      margin-top: -29px;
      left: 0;
      width: 100%;
      padding: 5px 0;
      padding-right: 10px;
      text-align: right;
    }
    .intro {
      font-size: 1.5em;
    }
  </style>
</head>
<body>
<div class="main">
<div class="ui inverted menu">
    <a href="#" class="header item">
      Overwatch Index
    </a>
</div>
<div class="ui two column doubling stackable grid">
    <div class="row">
    </div>
    <div class="row">
    <div class="three wide column">
      <div class="ui vertical menu">
        <div class="item">
          Heroes
          <div class="menu">
            {% for hero, data in results["heroes"].items() %}
            {% if (data["videos"] | length) > 0 %}
            <a class="{% if hero == active %}active {% endif %}item" href="{{ hero }}.html">
            {{ data.name }}
            <div class="ui label">{{ data["videos"] | length }}</div>
            </a>
            {% endif %}
            {% endfor %}
          </div>
        </div>
        <div class="item">
          Ranks
          <div class="menu">
            {% for rank, data in results["ranks"].items() %}
            {% if  (data["videos"] | length) > 0 %}
            <a class="{% if rank == active %}active {% endif %}item" href="{{ rank }}.html">
            {{ data.name }}
            <div class="ui label">{{ data["videos"] | length }}</div>
            </a>
            {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    <div class="floated twelve wide column">
        <div class="ui cards">
        {% if active == "index" %}
          <div class="container fluid">
          <p>
          <h1 class="ui header">Overwatch Coaching Index</h1><br />
          <p class="intro">
          This is a page in progress for helping Overwatch players find coaching and VOD reviews tailored to their specific hero or competitive rank.
          It is currently a very early work in progress so content and functionality will be limited.
          Updates are currently generated every four hours.
          </h3>
          </div>
        {% else %}
        {% if active in results["heroes"] %}
        {% for video in results["heroes"][active]["videos"] %}
        {% set date = video["snippet"]["publishedAt"].split("T")[0] %}
        <a class="ui raised card" target="_blank" href="https://www.youtube.com/watch?v={{ video.snippet.resourceId.videoId }}">
            <div class="image">
                <img width="{{ video.snippet.thumbnails.high.width }}"
                     height="{{ video.snippet.thumbnails.high.height }}"
                     src="{{ video.snippet.thumbnails.high.url }}">
            </div>
            <div class="content">
                <span class="header">{{ video.snippet.channelTitle }} - {{ video.snippet.title }}</span>
                <div class="meta">
                    <span class="date">{{ date }}</span>
                </div>
            </div>
            <div class="extra content">
            {% for rank in video.rank %}
                <div class="ui label {{ rank_to_colour(rank) }}"><i class="cubes icon"></i>{{ rank }}</div>
            {% endfor %}

            </div>
        </a>
        {% endfor %}
        {% elif active in results["ranks"] %}
        {% for video in results["ranks"][active]["videos"] %}
        {% set date = video["snippet"]["publishedAt"].split("T")[0] %}
        <a class="ui raised card" target="_blank" href="https://www.youtube.com/watch?v={{ video.snippet.resourceId.videoId }}">
            <div class="image">
                <img width="{{ video.snippet.thumbnails.high.width }}"
                     height="{{ video.snippet.thumbnails.high.height }}"
                     src="{{ video.snippet.thumbnails.high.url }}">
            </div>
            <div class="content">
                <span class="header">{{ video.snippet.channelTitle }} - {{ video.snippet.title }}</span>
                <div class="meta">
                    <span class="date">{{ date }}</span>
                </div>
            </div>
            <div class="extra content">
            {% for rank in video.rank %}
                <div class="ui label {{ rank_to_colour(rank) }}"><i class="cubes icon"></i>{{ rank }}</div>
            {% endfor %}
            </div>
        </a>
        {% endfor %}
        {% endif %}
        {% endif %}
        </div>
    </div>
    </div>
</div>
</div>
<div class="ui footer">
<i>Generated at {{ now }} UTC</i>
</div>
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous"></script>
</body>
</html>
